fragment messageFragment on Message {
  id
  content
  author {
    id
  }
  createdAt
}

query getChatById($chatId: ID!) {
  getChatById(chatId: $chatId) {
    id
    participants {
      id
      # extract necessary fields
    }
    messages {
      ...messageFragment
    }
  }
}

mutation CreateMessage($content: String!, $chatId: String!) {
  createMessage(content: $content, chatId: $chatId) {
    ...messageFragment
  }
}

query GetMessages($chatId: ID!) {
  getMessages(chatId: $chatId) {
    id
    content
    author {
      id
    }
    createdAt
  }
}

subscription NewMessage($chatId: ID!) {
  messageCreated(chatId: $chatId) {
    ...messageFragment
  }
}
