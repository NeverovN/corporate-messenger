type Message {
  id: ID!
  content: MessageContent!
  author: User!
  chatId: ID!
  createdAt: String!
  readBy: [User!]!
  lastEdit: String
}

type Chat {
  id: ID!
  isDialog: Boolean!
  title: String!
  participants: [User]!
  createdAt: String!
  logo: String
  messages: [Message] # pagination will live here (it will become a sub-query)
  settings: ChatSettings
}

type MessageContent {
  text: String
  media: [String!]
}

type ChatSettings {
  testField: String
}

type Query {
  getChats: [Chat]
  getChatById(chatId: ID!): Chat
  getMessageById(messageId: ID!): Message
}

type Mutation {
  createChat(participants: [ID!]!, title: String!): Chat!
  createMessage(input: CreateMessageInput!): Message!
  deleteChatById(chatId: ID!): Chat!
  deleteMessageById(messageId: ID!): Message!
  editMessage(messageId: ID!, newContent: String!): Message!
  markRead(messageId: ID!): Message!
}

type Subscription {
  newChat: Chat!
  chatDeleted: Chat!
  newMessage(chatId: ID!): Message!
  messageEdited(chatId: ID!): Message!
}

input CreateMessageInput {
  content: MessageContentInput!
  chatId: String!
}

input MessageContentInput {
  text: String!
  media: [String!]
}
